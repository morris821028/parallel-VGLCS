\begin{algorithm}
\SetAlgoNoLine
\KwIn{$A[1 \cdots 16]$: 16 integers store in array}
\KwOut{$\textit{tmask}$: compress Cartesian tree into 64-bits integer}

$\tt{LOGS} \gets 4$, $\tt{POWS} \gets 2^{\tt{LOGS}}$ \;
Create an array $D[\tt{POWS}+1]$ with size $\tt{POWS}+1$. \;
$\textit{Dp} \gets 0$ \;

Unsigned 64-bit integer $\textit{tmask} \gets 0$ \;
$D[0] \gets \infty$ \;
\For{$i \gets 1$ to $\tt{POWS}$} {
  $v \gets A[i], \; \textit{cnt} \gets 0$\;
  \While{$D[\textit{Dp}] < v$} {
    $\textit{Dp} \gets \textit{Dp}-1$ \;
    $\textit{cnt} \gets \textit{cnt} + 1$ \;
  }
  $\textit{Dp} \gets \textit{Dp}+1$ \;
  $D[\textit{Dp}] \gets v$ \;
  $\textit{tmask} \gets \textit{tmask} \mathrel{|} (cnt \ll ((i-1) \ll 2))$ \;
}
return $tmask$ \;

  \caption{Transfer Cartesian Tree to 64-bits with 8 integers}
  \label{alg:cartesian-to-64bits}
\end{algorithm}