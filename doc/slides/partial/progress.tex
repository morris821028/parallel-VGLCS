\section{Progress}

\subsection{Prerequisites}
\begin{frame}
    \frametitle{All Pair Least Common Ancestors}
    \begin{itemize}
    	\setlength\itemsep{1em}
    	\item Generating all binary search tree(BST) from $1$ to $n$.
    	\item Store $\textit{LCA}(p, q)$ for each BST $T$, node $p$ and $q$.
		\item The size of table is $\theta(n^2 \frac{1}{n+1} \binom{2n}{n})$.
		\item We need real-time encoding-decoding. Therefore, 
			each step consumes $\mathcal{O}(1)$ time, 
			and total time is $\mathcal{\theta}(n)$.
    \end{itemize}
\end{frame}

\subsection{Parallel Generating All BST}
\begin{frame}
	\frametitle{Identity for BST}
		\input{./figure/fig-bst-n1}
		\input{./figure/fig-bst-n2}
		\input{./figure/fig-bst-n3}
\end{frame}

\begin{frame}
	\frametitle{LCA Definition}
	From lexicographical order, we can get $\langle\mathit{lsz},\mathit{lid},\mathit{rsz},\mathit{rid}\rangle$ 
	of tree $\mathit{tid}$ in $\mathcal{O}(n)$
	\begin{align*}
		& \mathit{LCA}(n, \mathit{tid}, p, q) \\
			&= \left\{\begin{matrix*}[l]
 				\mathit{LCA}(\mathit{lsz}, \mathit{lid}, p, q) &&, p \le q < \mathit{lsz}\\ 
 				\mathit{LCA}(\mathit{rsz}, \mathit{rid}, p-\mathit{lsz}-1, q-\mathit{lsz}-1)+\mathit{lsz}+1 &&, 
 						\mathit{lsz} \le p \le q < n \\ 
 				\mathit{lsz} && , 0 \le p \le \mathit{lsz}, p \le q \le i\\ 
 				-1 && ,\mathit{otherwise}
			\end{matrix*}\right.
	\end{align*}
\end{frame}

\begin{frame}
	\lstinputlisting{code/lca.c}
	The parallel algorithm is 
	\begin{align*}
		\mathcal{\theta}\left(s^3 \; \frac{1}{s+1} \binom{2s}{s} \bigg/ p + s^2 \right)
	\end{align*}
\end{frame}

\begin{frame}
	\lstinputlisting{code/tid.c}
	Encoding function is $\mathcal{O}(1)$ by preprocessing all possible sums.
\end{frame}

\begin{frame}
	\frametitle{Maintain Inblock Query}
	These are the following types of operations:
	\begin{itemize}
		\item \texttt{Append V} : Append value $V$ to array $A$
		\item \texttt{Query L R} : Report maximum value in $A[L .. R]$
	\end{itemize}
	Challenge:
	\begin{itemize}
		\item Adjust tree ID dynamically for $O(1)$ each interval query.
		\item Each interval query consume $O(1)$ time.
	\end{itemize}
\end{frame}

\begin{frame}
	\frametitle{Offline Encoding BST}
	\lstinputlisting{code/offline-encode.c}
\end{frame}

\begin{frame}
	\frametitle{The Definition of Online Encoding BST}
	\lstinputlisting{code/online-encode-state.c}
\end{frame}
\begin{frame}
	\frametitle{Online Encoding BST}
	\lstinputlisting{code/online-encode.c}
\end{frame}